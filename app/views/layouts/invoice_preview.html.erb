<!DOCTYPE html>
<html class="h-full">
  <head>
    <title>Invoice #<%= @invoice.invoice_number %> - <%= current_account.name %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="robots" content="noindex, nofollow">

    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>

    <style>
      @media print {
        body {
          -webkit-print-color-adjust: exact;
          print-color-adjust: exact;
          background: white !important;
        }
        .no-print { display: none !important; }
        .print-break { page-break-after: always; }
        .invoice-container {
          box-shadow: none !important;
          margin: 0 !important;
          max-width: 100% !important;
        }
      }
      @page {
        size: letter;
        margin: 0.5in;
      }

      /* Custom gradient background */
      .invoice-bg {
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      }

      /* Subtle pattern overlay */
      .pattern-overlay {
        background-image: radial-gradient(circle at 1px 1px, rgba(148, 163, 184, 0.05) 1px, transparent 0);
        background-size: 20px 20px;
      }
    </style>
  </head>

  <body class="invoice-bg pattern-overlay min-h-full">
    <%# Floating toolbar %>
    <div class="no-print fixed top-0 left-0 right-0 z-50">
      <div class="bg-white/80 backdrop-blur-xl border-b border-slate-200/50 shadow-sm">
        <div class="max-w-5xl mx-auto px-6 py-4">
          <div class="flex items-center justify-between">
            <%# Left side - Back link %>
            <div class="flex items-center gap-4">
              <%= link_to invoice_path(@invoice), class: "inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors group" do %>
                <div class="w-8 h-8 rounded-lg bg-slate-100 group-hover:bg-slate-200 flex items-center justify-center transition-colors">
                  <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
                  </svg>
                </div>
                <span class="text-sm font-medium">Back to Invoice</span>
              <% end %>
            </div>

            <%# Center - Invoice info %>
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/25">
                <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                </svg>
              </div>
              <div>
                <p class="text-sm font-semibold text-slate-900">Invoice #<%= @invoice.invoice_number %></p>
                <p class="text-xs text-slate-500"><%= @invoice.client.name %></p>
              </div>
            </div>

            <%# Right side - Actions %>
            <div class="flex items-center gap-2">
              <button onclick="window.print()" class="inline-flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl text-sm font-medium transition-all shadow-lg shadow-indigo-500/25 hover:shadow-indigo-500/40">
                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z" />
                </svg>
                Print
              </button>

              <%= link_to download_invoice_path(@invoice), class: "inline-flex items-center gap-2 px-4 py-2.5 bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 rounded-xl text-sm font-medium transition-colors" do %>
                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
                </svg>
                Download
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="pt-28 pb-16 px-4">
      <%= yield %>
    </div>

    <%# Footer %>
    <div class="no-print fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-slate-200/50 py-3">
      <div class="max-w-5xl mx-auto px-6 text-center">
        <p class="text-xs text-slate-400">
          Powered by <span class="font-medium text-slate-600">Subcontractor Command</span> â€¢ Professional Invoice Management
        </p>
      </div>
    </div>
  </body>
</html>
