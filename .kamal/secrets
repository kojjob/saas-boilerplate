# Kamal Secrets Configuration
#
# Secrets defined here are available for reference under registry/password, env/secret, builder/secrets,
# and accessories/*/env/secret in config/deploy.yml. All secrets should be pulled from either
# password manager, ENV, or a file. DO NOT ENTER RAW CREDENTIALS HERE! This file needs to be safe for git.
#
# For local development/testing, you can set these as environment variables.
# For production, use a secrets manager (1Password, Bitwarden, etc.)

# Option 1: Read secrets from the environment (simplest approach)
KAMAL_REGISTRY_USERNAME=$KAMAL_REGISTRY_USERNAME
KAMAL_REGISTRY_PASSWORD=$KAMAL_REGISTRY_PASSWORD

# Rails secrets
RAILS_MASTER_KEY=$(cat config/master.key 2>/dev/null || echo "${RAILS_MASTER_KEY}")
SECRET_KEY_BASE=$SECRET_KEY_BASE

# Database
DATABASE_URL=$DATABASE_URL
POSTGRES_PASSWORD=$POSTGRES_PASSWORD

# Redis (optional)
REDIS_URL=$REDIS_URL

# Email configuration
DEFAULT_FROM_EMAIL=$DEFAULT_FROM_EMAIL
DEFAULT_FROM_NAME=$DEFAULT_FROM_NAME

# OAuth
GOOGLE_CLIENT_ID=$GOOGLE_CLIENT_ID
GOOGLE_CLIENT_SECRET=$GOOGLE_CLIENT_SECRET

# Stripe
STRIPE_PUBLISHABLE_KEY=$STRIPE_PUBLISHABLE_KEY
STRIPE_SECRET_KEY=$STRIPE_SECRET_KEY
STRIPE_WEBHOOK_SECRET=$STRIPE_WEBHOOK_SECRET

# Option 2: Use 1Password secrets manager
# Uncomment and configure if using 1Password:
#
# SECRETS=$(kamal secrets fetch \
#   --adapter 1password \
#   --account your-team.1password.com \
#   --from "Vault/SaaS Boilerplate" \
#   KAMAL_REGISTRY_USERNAME \
#   KAMAL_REGISTRY_PASSWORD \
#   RAILS_MASTER_KEY \
#   SECRET_KEY_BASE \
#   DATABASE_URL \
#   POSTGRES_PASSWORD \
#   GOOGLE_CLIENT_ID \
#   GOOGLE_CLIENT_SECRET \
#   STRIPE_PUBLISHABLE_KEY \
#   STRIPE_SECRET_KEY \
#   STRIPE_WEBHOOK_SECRET)
#
# KAMAL_REGISTRY_USERNAME=$(kamal secrets extract KAMAL_REGISTRY_USERNAME $SECRETS)
# KAMAL_REGISTRY_PASSWORD=$(kamal secrets extract KAMAL_REGISTRY_PASSWORD $SECRETS)
# ... etc
